{"pageProps":{"post":{"title":"Flutter Widget: ValueListenableBuilder","date":1618358400,"slug":"flutter-widget-valuelistenablebuilder","author":"kaichi","content":"<p>ç›¸ä¿¡å¤§å®¶ä¸€å®šç”¨è¿‡ <code>setState</code>, åœ¨ <code>StatefulWidget</code> ä¸­æˆ‘ä»¬å¸¸ä½¿ç”¨ <code>setState</code> æ¥æ›´æ–°ç»„ä»¶çŠ¶æ€ä»¥æ­¤æ¥æ›´æ–° uiã€‚ä¸‹é¢è¿™ä¸ªè®¡æ•°å™¨çš„ ğŸŒ° å¤§å®¶éå¸¸ç†Ÿæ‚‰ã€‚</p>\n<pre><code class=\"language-dart\">class _CounterState extends State&#x3C;Counter> {\n  int _count = 0;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Center(\n        child: Text(\n          'You had tapped $_count.',\n        ),\n      ),\n      floatingActionButton: FloatingActionButton(\n        child: Icon(Icons.add),\n        onPressed: () => setState(() => _count++),\n      ),\n    );\n  }\n}\n</code></pre>\n<p>ä»Šå¤©ç»™å¤§å®¶ä»‹ç»çš„ <strong>ValueListenableBuilder</strong>, å¯ä»¥è®©æˆ‘ä»¬æ›´æ–°çš„çš„ç»„ä»¶çŠ¶æ€è€Œä¸éœ€è¦ä½¿ç”¨<code>setState</code>ã€‚<strong>ValueListenableBuilder</strong> æœ‰ä¸¤ä¸ªå¿…é¡»å¿…éœ€çš„å‚æ•°ã€‚<em>valueListenable</em> æ˜¯ <strong>ValueNotifier</strong> å®ä¾‹ï¼Œ<em>builder</em> æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ ¹æ®æ‰€ç›‘å¬çš„å€¼æ¥æ„å»ºç»„ä»¶ï¼Œä½¿ç”¨ <strong>ValueListenableBuilder</strong> å®ç°ä¸€ä¸ªè®¡æ•°å™¨ã€‚</p>\n<p>ä½ ä¼šå‘ç°è¿™æ ·ä¸€ä¸ªè®¡æ•°å™¨ä¾æ—§æ˜¯æ­£å¸¸å·¥ä½œçš„ï¼Œæ—¢ç„¶æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ <code>setState</code> æ–¹æ³•ï¼Œç»„ä»¶æ˜¯å¦‚ä½•æ›´æ–°çš„å‘¢ï¼Ÿ</p>\n<p><strong>ValueListenableBuilder</strong> ä¼šç›‘å¬ <strong>ValueListenable</strong> ä¸Šçš„ä»»ä½•æ›´æ”¹ï¼Œå› æ­¤å¯ä»¥åœ¨å€¼æ›´æ”¹åé‡å»º UIã€‚è¿™ä¹Ÿæ˜¯ç›®å‰ä¸ºæ­¢å”¯ä¸€å¯ä»¥åŸºäºç»„ä»¶å½“å‰çŠ¶æ€é‡æ„ UI çš„æ–¹æ³•ï¼Œå½“ç‚¹å‡»æŒ‰é’®ä½¿ counter çš„ value æ›´æ–°åï¼Œæ›´æ–°çš„ä¹Ÿåªæ˜¯ Text ç»„ä»¶ï¼Œè€Œä¸éœ€è¦æ•´ä¸ªé¡µé¢é‡æ„ã€‚</p>\n<p>é™¤äº†ä¸Šé¢çš„ä¸¤ä¸ªå‚æ•°ï¼Œ<strong>ValueListenableBuilder</strong> è¿˜æœ‰å¦å¤–ä¸€ä¸ªå‚æ•° <em>child</em>ã€‚ä¸Šé¢çš„è®¡æ•°å™¨ <em>builder</em> è¿”å›ä¸€ä¸ª <strong>Text</strong> ç»„ä»¶å±•ç¤º counter çš„å€¼ï¼Œå½“ counter çš„å€¼æ”¹å˜æ—¶éœ€è¦é‡æ„çš„ç»„ä»¶ä¹Ÿå°±æ˜¯è¿™ä¸ª <strong>Text</strong> ç»„ä»¶ã€‚ä½†æœ‰æ—¶ <em>builder</em> è¿”å›äº†ä¸€ä¸ªéå¸¸å¤æ‚çš„ç»„ä»¶ï¼Œä½†æ˜¯åªæœ‰ä¸€éƒ¨åˆ†ç»„ä»¶ä¾èµ– valueã€‚è¿™æ˜¯æˆ‘ä»¬å°±è¦ç”¨çš„ <em>child</em> å‚æ•°ï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ª ğŸŒ°ã€‚</p>\n<pre><code class=\"language-dart\">ValueListenableBuilder(\n  valueListenable: _counter,\n  builder: (context, value, child) => Container(\n    width: 200,\n    height: 200,\n    color: value % 2 == 0 ? Colors.blue : Colors.red,\n    alignment: Alignment.center,\n    child: child,\n  ),\n  child: Container(\n    color: Colors.green,\n    width: 100,\n    height: 100,\n  ),\n)\n</code></pre>\n<p>å½“ value æ”¹å˜æ—¶ï¼Œåªæœ‰å¤–é¢çš„ <strong>Container</strong> ä¼šé‡æ„ï¼Œè€Œå†…éƒ¨ <strong>Container</strong> åˆ™ä¸ä¼šé‡æ„ã€‚</p>\n<blockquote>\n<p>è®°å¾—é”€æ¯ <strong>ValueNotifier</strong>, é¿å…å†…å­˜æ³„æ¼ã€‚å°±åƒè¿™æ ·ã€‚</p>\n</blockquote>\n<pre><code class=\"language-dart\">  @override\n  void dispose() {\n    _counter.dispose();\n    super.dispose();\n  }\n</code></pre>\n","excerpt":"ValueListenableBuilder ç»„ä»¶ä»‹ç»"}},"__N_SSG":true}